# Reference: <https://postmarketos.org/devicepkg>
# Maintainer: Robert Eckelmann <longnoserob@postmarketos.org>

pkgname=device-solidrun-cubox
pkgdesc="SolidRun CuBox"
pkgver=2
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="armv7"
options="!check !archcheck"
depends="
	linux-postmarketos-marvell-dove
	postmarketos-base
	u-boot-tools
"
makedepends="devicepkg-dev"
source="
	deviceinfo
	boot.cmd
"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
	mkimage -A arm -O linux -T script -C none -n "uBoot commands" -d "$srcdir"/boot.cmd "$srcdir"/boot.scr
	install -Dm755 "$srcdir"/boot.cmd "$pkgdir"/boot/boot.cmd
	install -Dm755 "$srcdir"/boot.scr "$pkgdir"/boot/boot.scr
}

sha512sums="
3a10efdda7db2702b32f9c87b3ea4a69c8ebabcc2296a20ecb8072efc95317766a7ab82af9c4944d762c3da3acf697a59b390c89b6178136d236620555f07775  deviceinfo
c651eb52066d6a8aa48388b391de0c9a4d85369adce3d2228bd3dfaa4d3ab797dbeca6965d5e3b898a378cb9d52215f946e497c44fc37b5fc668ec79d5f24ffc  boot.cmd
"
